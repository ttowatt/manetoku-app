<%= render "public/header2" %>
<div class="container mt-4">
  <h1 class="mb-3">検索結果</h1>

  <% if @keyword.present? %>
    <p>検索ワード：「<strong><%= @keyword %></strong>」</p>
  <% else %>
    <p>検索ワードが入力されていません。</p>
  <% end %>

  <hr>

  <% if @results.present? && @results.any? %>
    <% if @model == "user" %>
      <h3>ユーザー一覧 (<%= @results.count %>件)</h3>
      <div class="user-results mt-3">
        <% @results.each do |user| %>
          <div class="card mb-3 p-3 shadow-sm">
            <div class="d-flex align-items-center">
              <%= image_tag user.get_profile_image, size: "60x60", class: "rounded-circle me-3" %>
              <div>
                <h5><%= link_to user.username, public_user_path(user), class: "text-dark fw-bold" %></h5>
                <p class="mb-0 text-muted"><%= truncate(user.introduction, length: 30) %></p>
              </div>
            </div>
          </div>
        <% end %>
      </div>

    <% elsif @model == "post" %>
      <h3>投稿一覧 (<%= @results.count %>件)</h3>
      <div class="post-results mt-3">
        <% @results.each do |post| %>
          <div class="card mb-3 p-3 shadow-sm">
            <div class="d-flex">
              <%= image_tag post.get_post_image, size: "100x100", class: "rounded me-3" %>
              <div>
                <h5><%= link_to post.category, public_post_path(post), class: "text-dark fw-bold" %></h5>
                <h5><%= link_to post.title, public_post_path(post), class: "text-dark fw-bold" %></h5>
                <p><%= truncate(post.body, length: 100) %></p>
                <p class="text-muted">
                  投稿者：<%= link_to post.user.username, public_user_path(post.user) %>
                  投稿日：<%= l(post.created_at, format: :short) %>
                </p>
              </div>
            </div>
          </div>
        <% end %>
      </div>

    <% end %>
  <% else %>
    <p class="text-muted">該当する結果はありません。</p>
  <% end %>
</div>